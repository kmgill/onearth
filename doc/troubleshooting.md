## Troubleshooting

The following problems are sometimes intricate and obscure. Please read carefully to locate a problem that matches, especially with regard to messages in the Apache error log. Problems are not grouped in any particular order. 

## Issues

### Problem: Layers not visible to client software. 

#### Suggestion: 
Verify that MRF data (.idx and .ppg/.pjg) are accessible in accordance with the configuration in httpd.conf. From the configured location, only one more level of subdirectories may be used, as multiple-depth subdirectories may go unrecognized. 

### Problem: "Can't get index record" in Apache error log.

#### Suggestion:
Make sure that the MRF data is accessible at the configured location in the httpd.conf file.  The configured location may be different for Tiled-WMS and WMTS.

### Problem: Error when testing a sample WMTS request in a browser.
```
Forbidden
You don't have permission to access /wmts.cgi on this server.
```

#### Suggestion:
Make sure wmts.cgi is in the directory specified in httpd.conf.  If using a subdirectory below DocumentRoot, then be sure that that subdirectory is specified in the WMTS Directory block.  Make sure Apache has permission to access those directories. Check SELinux restrictions.

### Problem: "Bad or null KML" message in Google Earth client.

The message "Bad or null KML" is generated by the Google Earth plugin when it cannot access the OnEarth server.  Lack of access can occur for a variety of reasons.

#### Suggestion:
Make sure the OnEarth Apache server is running and includes a working service endpoint for KML.

## General Tips

* Check the Apache error log for any relevant messages when the OnEarth server exhibits unexpected behavior.
* Vagrant virtual machines are available for configuration reference: [https://github.com/nasa-gibs/onearth-boxes](https://github.com/nasa-gibs/onearth-boxes)
* The [read_mrf.py](https://github.com/nasa-gibs/onearth/blob/master/src/scripts/read_mrf.py) tool can be used to examine MRF files.
* A helpful way to test that an MRF file was created properly is to use gdal_translate to convert it into another raster format.

## Contact

Contact us by sending an email to
[support@earthdata.nasa.gov](mailto:support@earthdata.nasa.gov)
